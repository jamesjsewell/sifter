!function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},i=function(i){function o(){return e(this,o),s(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return a(o,i),t(o,[{key:"init",value:function(){this.theGame=this.game.state.game,this.width=this.theGame._width,this.height=this.theGame._height}},{key:"create",value:function(){this.theGame.add.sprite(0,0,"menu_bg"),this.button=this.theGame.add.button(this.width/2,this.height/2,"menu_start_button",this.startGame,this,1,0,2),this.button.x=this.width/2-this.button.texture.frame.width/2,this.button.y=this.height/2-this.button.texture.frame.height/2}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"startGame",value:function(){this.theGame.state.start("Game")}}]),o}(Phaser.State),o=function(i){function o(){return e(this,o),s(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return a(o,i),t(o,[{key:"init",value:function(){this.theGame=this.game.state.game,this.w=this.theGame.width,this.h=this.theGame.height,this.selectedTilesArray=[],this.selected=!1}},{key:"preload",value:function(){}},{key:"create",value:function(){this.theTileMap=this.theGame.add.tilemap("testing"),this.theTileMap.addTilesetImage("tiles"),this.layer1=this.theTileMap.createLayer("base_layer"),this.theGame.input.onDown.add(this.getTileProperties,this),this.theTileMap.forEach(function(e){0!==e.x&&7!==e.x&&0!==e.y&&7!==e.y||e.properties&&(e.properties.isBorder=!0,console.log(e))},this,0,0,8,8,0),console.log(this.theTileMap)}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"getTileProperties",value:function(){var e=this.layer1.getTileX(this.theGame.input.activePointer.worldX),t=this.layer1.getTileY(this.theGame.input.activePointer.worldY),a=this.theTileMap.getTile(e,t,this.layer1);if(!this.selectedTilesArray.length&&a&&!a.properties.isBorder)return this.selectedTilesArray[0]=a,void(this.selected=!0);!0!==this.selected||a.properties.isBorder||(a||console.log("drop selection"),a&&(this.selectedTilesArray[1]=a,this.swap()))}},{key:"swap",value:function(){var e=this.selectedTilesArray[0],t=new Phaser.Tile,a=this.selectedTilesArray[1],s=new Phaser.Tile;for(var i in a)a.hasOwnProperty(i)&&(s[i]=a[i]);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);this.theTileMap.putTile(e,s.x,s.y),this.theTileMap.putTile(s,t.x,t.y),this.selectedTilesArray=[],this.selected=!1}}]),o}(Phaser.State),h=function(i){function o(){return e(this,o),s(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return a(o,i),t(o,[{key:"init",value:function(){}},{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"render",value:function(){}}]),o}(Phaser.State),r=function(i){function o(){return e(this,o),s(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return a(o,i),t(o,[{key:"init",value:function(){this.theGame=this.game.state.game,this.score=0}},{key:"preload",value:function(){}},{key:"create",value:function(){this.cursors=this.theGame.input.keyboard.createCursorKeys(),this.theGame.physics.startSystem(Phaser.Physics.ARCADE),this.theGame.add.sprite(0,0,"sky"),this.platforms=this.theGame.add.group(),this.platforms.enableBody=!0,this.ground=this.platforms.create(0,this.theGame.world.height-64,"ground"),this.ground.scale.setTo(2,2),this.ground.body.immovable=!0,this.ledge=this.platforms.create(400,480,"ground"),this.ledge.body.immovable=!0,this.ledge=this.platforms.create(-100,440,"ground"),this.ledge.body.immovable=!0,this.ledge=this.platforms.create(200,400,"ground"),this.ledge.scale.setTo(.2,.5),this.ledge.body.immovable=!0,this.player=this.theGame.add.sprite(32,this.theGame.world.height-150,"dude"),this.theGame.physics.arcade.enable(this.player),this.player.body.bounce.y=.2,this.player.body.gravity.y=900,this.player.body.collideWorldBounds=!0,this.player.animations.add("left",[0,1,2,3],10,!0),this.player.animations.add("right",[5,6,7,8],10,!0),this.stars=this.theGame.add.group(),this.stars.enableBody=!0;for(var e=0;e<12;e++){var t=this.stars.create(70*e,0,"star");t.body.gravity.y=900,t.body.bounce.y=.7+.2*Math.random()}this.scoreText=this.theGame.add.text(650,0,"score: 0",{font:"18px Arial",fill:"#ffffff",align:"right"}),this.scoreText.fixedToCamera=!0,this.scoreText.cameraOffset.setTo(650,0),this.seeker=this.theGame.add.sprite(400,300,"../assets/images/diamond.png"),this.seeker.anchor.setTo(.5,.5),this.theGame.physics.enable(this.seeker,Phaser.Physics.ARCADE),this.seeker.body.allowRotation=!1,this.pause_menu()}},{key:"update",value:function(){this.theGame.world.setBounds(0,0,1920,1920),this.theGame.camera.follow(this.player,Phaser.Camera.FOLLOW_LOCKON,.1,.1);var e=this.theGame.physics.arcade.collide(this.player,this.platforms);this.player.body.velocity.x=0,this.cursors.left.isDown?(this.player.body.velocity.x=-150,this.player.animations.play("left")):this.cursors.right.isDown?(this.player.body.velocity.x=150,this.player.animations.play("right")):(this.player.animations.stop(),this.player.frame=4),this.cursors.up.isDown&&this.player.body.touching.down&&e&&(this.player.body.velocity.y=-350),this.theGame.physics.arcade.collide(this.stars,this.platforms),this.theGame.physics.arcade.overlap(this.player,this.stars,this.collectStar,null,this),this.seeker.rotation=this.theGame.physics.arcade.moveToPointer(this.seeker,60,this.theGame.input.activePointer,500)}},{key:"render",value:function(){var e=this.theGame.debug;e.scale(20,20,"#fff"),e.phaser(10,580)}},{key:"pause_menu",value:function(){var e=800,t=600;i(this),console.log(this.theGame);var a=this;function s(){a.theGame.paused=!0,a.pause_button.destroy(),a.menu=a.theGame.add.sprite(e/2,t/2,"menu");var s=a.theGame.camera.x,o=a.theGame.camera.y;a.choiceLabel=a.theGame.add.text(e/2,t-150,"Click outside menu to continue",{font:"30px Arial",fill:"#fff"}),a.menu.x=s+e/2-135,a.menu.y=o+t/2-90,a.menu.x=a.theGame.camera.x+e/2-135,a.menu.y=a.theGame.camera.y+t/2-90,a.choiceLabel.x=a.menu.x,a.choiceLabel.y=a.menu.y+t/3.5,a.resume_button=a.theGame.add.button(a.theGame.world.centerX,a.theGame.world.centerY,"resumeButton",function(e){a.resume_button.setFrames(0,1,2),a.theGame.paused&&(a.menu.destroy(),a.choiceLabel.destroy(),a.resume_button.destroy(),a.theGame.paused=!1,i(a))},a,1,0,2),a.resume_button.x=s+e/2-32,a.resume_button.y=o+20,a.theGame.input.onDown.add(function(s){if(a.theGame.paused){var i=e/2-135,o=e/2+135,h=t/2-90,r=t/2+90;if(s.x>i&&s.x<o&&s.y>h&&s.y<r){var n=s.x-i,l=s.y-h,u=Math.floor(n/90)+3*Math.floor(l/90);a.choiceLabel.text="You chose menu item: "+["one","two","three","four","five","six"][u]}}},a)}function i(t){t.pause_button=t.theGame.add.button(t.theGame.world.centerX,t.theGame.world.centerY,"pauseButton",s,this,1,0,2),t.pause_button.fixedToCamera=!0,t.pause_button.cameraOffset.setTo(e/2-32,20)}}},{key:"collectStar",value:function(e,t){t.kill(),this.score+=10,console.log(this.score),this.scoreText.text="score: "+this.score}}]),o}(Phaser.State),n=function(i){function o(){return e(this,o),s(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return a(o,i),t(o,[{key:"init",value:function(){}},{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"render",value:function(){}}]),o}(Phaser.State),l=function(l){function u(){return e(this,u),s(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return a(u,l),t(u,[{key:"init",value:function(){this.theGame=this.game.state.game,this.addedStates=!1,this.theGame.load.onLoadStart.add(this.loadStart,this),this.theGame.load.onFileComplete.add(this.fileComplete,this),this.theGame.load.onLoadComplete.add(this.loadComplete,this),this.theGame.scale.aspectRatio=1,console.log(this.theGame.scale.aspectRatio),console.log(this.theGame)}},{key:"preload",value:function(){this.theGame.load.tilemap("testing","assets/images/tilemap.json",null,Phaser.Tilemap.TILED_JSON),this.theGame.load.image("tiles","./assets/images/tilemap.png"),this.theGame.load.image("button_bg","./assets/images/button_background.png"),this.theGame.load.image("sky","./assets/images/sky.png"),this.theGame.load.image("ground","./assets/images/platform.png"),this.theGame.load.image("star","./assets/images/star.png"),this.theGame.load.spritesheet("dude","./assets/images/dude.png",32,48),this.theGame.load.spritesheet("resumeButton","./assets/pause_menu/resume_button.png",32,32),this.theGame.load.spritesheet("pauseButton","./assets/pause_menu/pause_button.png",32,32),this.theGame.load.image("menu","./assets/images/number-buttons-90x90.png",270,180),this.theGame.load.bitmapFont("carrier_command","assets/fonts/carrier_command.png","assets/fonts/carrier_command.xml"),this.theGame.load.bitmapFont("gem","assets/fonts/gem.png","assets/fonts/gem.xml"),this.theGame.load.spritesheet("menu_start_button","./assets/main_menu/play_button.png",128,32),this.theGame.load.image("menu_bg","./assets/main_menu/menu_bg.png")}},{key:"create",value:function(){this.bmpText=this.theGame.add.bitmapText(10,100,"gem","LOADING...",34),this.addGameStates(),this.addGameMusic(),this.leftKey=this.theGame.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightKey=this.theGame.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.spaceKey=this.theGame.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.theGame.input.keyboard.addKeyCapture([Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT,Phaser.Keyboard.SPACEBAR])}},{key:"update",value:function(){this.addedStates&&this.filesLoaded&&this.theGame.state.start("Game")}},{key:"addGameStates",value:function(){this.theGame.state.add("GameMenu",i),this.theGame.state.add("Game",o),this.theGame.state.add("GameOver",h),this.theGame.state.add("Credits",r),this.theGame.state.add("Options",n),this.addedStates=!0}},{key:"addGameMusic",value:function(){}},{key:"loadStart",value:function(){console.log("loading")}},{key:"fileComplete",value:function(e,t,a,s,i){console.log(e)}},{key:"loadComplete",value:function(){this.filesLoaded=!0}}]),u}(Phaser.State);new(function(t){function i(){e(this,i);var t=s(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,{renderer:Phaser.AUTO,width:512,height:512,aspectRatio:1,crisp:!0,roundPixels:!0,alignH:!0,alignV:!0,scaleH:1,scaleV:1,trimH:0,trimV:0,scaleMode:Phaser.ScaleManager.SHOW_ALL,antialias:!0}));return t.state.add("Boot",l,!1),t.state.start("Boot"),t}return a(i,t),i}(Phaser.Game))}();
//# sourceMappingURL=compiled.js.map
